{
  "version": 3,
  "file": "app.js",
  "sourceRoot": "",
  "sources": [
    "app.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;AAAA,MAAA,KAAA,EAAA,IAAA,EAAA,KAAA,EAAA,QAAA,EAAA,UAAA,EAAA,QAAA,EAAA,SAAA,EAAA,MAAA,EAAA,QAAA,EAAA,KAAA,EAAA,KAAA,EAAA,QAAA,EAAA,QAAA,EAAA,OAAA,EAAA,eAAA,EAAA,gBAAA,EAAA,YAAA,EAAA,eAAA,EAAA,QAAA,EAAA,QAAA,EAAA;;EAAA,OAAA,GAAU,OAAA,CAAQ,SAAR;;EACV,OAAA,GAAU,OAAO,CAAC,QAAR,CAAiB;IAAC,GAAA,EAAK;EAAN,CAAjB;;EAEV,KAAA,GAAQ,OAAA,CAAQ,OAAR;;EACR,CAAA,CAAE,KAAF,CAAA,GAAY,KAAZ;;EAEA,QAAA,GAAW,OAAA,CAAQ,eAAR;;EAEX,QAAA,GAAW,OAAA,CAAQ,YAAR;;EAEX,UAAA,GAAa,QAAQ,CAAC;;EACtB,QAAA,GAAW,QAAQ,CAAC;;EACpB,QAAA,GAAW,QAAQ,CAAC;;EACpB,QAAA,GAAW,QAAQ,CAAC;;EAEpB,QAAA,GAAW,kCAAA,GAAqC,UAArC,GAAkD;;EAC7D,SAAA,GAAY;;EACZ,KAAA,GAAQ;;EACR,QAAA,GAAW;;EACX,IAAA,GAAO;;EAEP,MAAA,GAAS;;EAET,KAAA,GAAQ,QAAA,CAAA,CAAA;IACN,eAAA,CAAA;IAEA,UAAA,CAAW,KAAX,EAAkB,KAAA,GAAQ,QAA1B;EAHM,EAvBR;;;EAgCA,eAAA,GAAkB,QAAA,CAAA,CAAA;WAChB,OAAA,CAAQ;MACN,MAAA,EAAS,KADH;MAEN,GAAA,EAAM;IAFA,CAAR,EAGG,YAHH;EADgB;;EAOlB,YAAA,GAAe,QAAA,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAAA;WACb,OAAA,CAAQ;MACN,MAAA,EAAS,KADH;MAEN,GAAA,EAAM;IAFA,CAAR,EAGG,eAHH;EADa;;EAMf,eAAA,GAAkB,QAAA,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAAA;WAChB,OAAA,CAAQ;MACN,MAAA,EAAS,MADH;MAEN,GAAA,EAAM,QAFA;MAGN,IAAA,EACE;QAAA,QAAA,EAAW,QAAX;QACA,QAAA,EAAW;MADX;IAJI,CAAR,EAMG,gBANH;EADgB;;EASlB,gBAAA,GAAmB,QAAA,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAAA;WACjB,OAAA,CAAQ;MACN,MAAA,EAAS,KADH;MAEN,GAAA,EAAM;IAFA,CAAR,EAGG,QAHH;EADiB;;EASnB,QAAA,GAAW,QAAA,CAAC,GAAD,EAAM,IAAN,EAAY,IAAZ,CAAA;AACT,QAAA,MAAA,EAAA,UAAA,EAAA,QAAA,EAAA,aAAA,EAAA,WAAA,EAAA,OAAA,EAAA,YAAA,EAAA,qBAAA,EAAA,GAAA,EAAA,KAAA,EAAA,WAAA,EAAA,cAAA,EAAA,WAAA,EAAA,CAAA,EAAA,GAAA,EAAA;IAAA,GAAA,GAAM,IAAI,KAAJ,CAAU,IAAV;IAEN,qBAAA,GAAwB,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,aAApB,CAAkC,iDAAlC;IACxB,YAAA,GAAe,qBAAqB,CAAC,QAAS,CAAA,CAAA;IAC9C,OAAA,GAAU,YAAY,CAAC,QAAS,CAAA,CAAA;IAEhC,QAAA,GAAW;AAEX;IAAA,KAAA,qCAAA;;MACE,KAAA,GAAQ,MAAM,CAAC,QAAS,CAAA,CAAA,CAAE,CAAC;MAC3B,cAAA,GAAiB,KAAK,CAAC,KAAN,CAAY,MAAZ;MACjB,cAAA,GAAiB,cAAe,CAAA,CAAA;MAChC,cAAA,GAAiB,cAAc,CAAC,KAAf,CAAqB,KAArB;MACjB,cAAA,GAAiB,cAAe,CAAA,CAAA;MAEhC,aAAA,GAAgB,MAAM,CAAC,QAAS,CAAA,CAAA;MAChC,UAAA,GAAa,aAAa,CAAC,QAAS,CAAA,CAAA;MACpC,WAAA,GAAc,UAAU,CAAC,SAAS,CAAC,IAArB,CAAA;MAEd,WAAA,GAAc,QAAA,CAAS,cAAT;MAEd,IAAG,MAAO,CAAA,QAAA,CAAP,KAAsB,CAAA,GAAA,CAAtB,IAA8B,0BAA9B,IAAoD,MAAO,CAAA,QAAA,CAAP,KAAsB,WAA7E;QACE,WAAA,GAAc,WAAA,GAAc,MAAO,CAAA,QAAA;QACnC,WAAA,GAAiB,WAAA,GAAc,CAAjB,GAAwB,GAAA,GAAM,WAA9B,GAA+C,GAAA,GAAM,IAAI,CAAC,GAAL,CAAS,WAAT;QACnE,QAAQ,CAAC,MAAT,CAAgB,WAAA,GAAc,IAAd,GAAqB,WAArB,GAAmC,IAAnC,GAA0C,WAA1C,GAAwD,GAAxE,EAHF;;MAKA,MAAO,CAAA,QAAA,CAAP,GAAmB;MACnB,QAAA,IAAY;IAnBd;EATS;;EAiCX,KAAA,CAAA;;EAhGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA",
  "sourcesContent": [
    "request = require 'request'\nrequest = request.defaults {jar: true}\n\njsdom = require 'jsdom'\n{ JSDOM } = jsdom\n\nnotifier = require 'node-notifier'\n\nsettings = require './settings'\n\ndistrictID = settings.districtID\nusername = settings.username\npassword = settings.password\ninterval = settings.interval\n\ndistrict = \"https://fridaystudentportal.com/\" + districtID + \"/\"\ngradebook = \"https://fridaystudentportal.com/portal/index.cfm?f=gradebook.cfm\"\nlogin = \"https://fridaystudentportal.com/portal/security/login.cfm\"\nvalidate = \"https://fridaystudentportal.com/portal/security/validateStudent.cfm\"\nbase = \"https://fridaystudentportal.com\"\n\ngrades = [];\n\ncrawl = ->\n  requestDistrict()\n\n  setTimeout(crawl, 60000 * interval)\n\n  return\n\n# Chain of http requests\n\nrequestDistrict = ->\n  request {\n    method : 'GET'\n    uri : district\n  }, requestLogin\n\n\nrequestLogin = (err, data, body) ->\n  request {\n    method : 'GET'\n    uri : login\n  }, requestValidate\n\nrequestValidate = (err, data, body) ->\n  request {\n    method : 'POST'\n    uri : validate\n    form :\n      username : username\n      password : password\n  }, requestGradebook\n\nrequestGradebook = (err, data, body) ->\n  request {\n    method : 'GET'\n    uri : gradebook\n  }, domParse\n\n\n\n\ndomParse = (err, data, body) ->\n  dom = new JSDOM body\n\n  coursesTableContainer = dom.window.document.querySelector 'div.table-responsive.table-responsive-cardtable'\n  coursesTable = coursesTableContainer.children[0]\n  courses = coursesTable.children[1]\n\n  courseNo = 0\n\n  for course in courses.children\n    grade = course.children[1].innerHTML\n    gradeFormatted = grade.split /\\t+/g\n    gradeFormatted = gradeFormatted[2]\n    gradeFormatted = gradeFormatted.split ' \\n'\n    gradeFormatted = gradeFormatted[0]\n\n    courseSection = course.children[0]\n    courseLink = courseSection.children[0]\n    courseTitle = courseLink.innerHTML.trim()\n\n    gradeNumber = parseInt gradeFormatted\n\n    if grades[courseNo] isnt NaN and grades[courseNo]? and grades[courseNo] isnt gradeNumber\n      gradeChange = gradeNumber - grades[courseNo]\n      gradeChange = if gradeChange > 0 then '+' + gradeChange else '-' + Math.abs(gradeChange)\n      notifier.notify courseTitle + ': ' + gradeNumber + ' (' + gradeChange + ')'\n\n    grades[courseNo] = gradeNumber\n    courseNo += 1\n\n  return\n\n\ncrawl()\n###var dom = new JSDOM(body);\n\nvar tableContainer = dom.window.document.querySelector('div.table-responsive.table-responsive-cardtable');\nvar table = tableContainer.children[0];\nvar tableBody = table.children[1];\nvar trs = tableBody.children;\n\nfor (var i = 0; i < trs.length; i ++) {\n  var tr = trs[i];\n\nvar gradeElement = tr.children[1];\nvar grade = gradeElement.innerHTML;\nvar gradeFormatted = grade.split(/\\t+/g)[2].split(' \\n')[0];\n\nvar gradeNumber = parseInt(gradeFormatted);\n\nvar course = tr.children[0];\nvar courseLink = course.children[0]\nvar courseTitle = courseLink.innerHTML;\nvar courseURI = courseLink.href;\n\nIf grade changed\nif (grades[i] != undefined && !isNaN(gradeNumber)) {\n  if (grades[i] != gradeNumber) {\n    var change = (gradeNumber > grades[i]) ?  \"risen\" : \"dropped\";\n    var difference = Math.abs(gradeNumber - grades[i]);\n    updates += ('Your grade in ' + courseTitle + ' has ' + change + ' ' + difference + ' points to a(n) ' + gradeNumber + '\\n');\n}\n}\n\n Update grade\ngrades[i] = gradeNumber;\n}###\n\n# Loop\n\n"
  ]
}